<div class="timeline-week-container">
    <div class="container">
        <div class="timeline-week-wrapper">
            @if (Enumerable.Count(ViewBag.DaysOfWeek) > 1)
            {
                <a asp-controller="Timeline" asp-action="Index" asp-route-startOfWeek="@ViewBag.DaysOfWeek[0].ToString("yyyy-MM-dd")" asp-route-daysOfWeekToAdd="-1" asp-route-daysToShow="7" class="me-3 bi bi-arrow-left-circle timeline-arrow"></a>
            }
            else
            {
                <a asp-controller="Timeline" asp-action="Index" asp-route-startOfWeek="@ViewBag.DaysOfWeek[0].ToString("yyyy-MM-dd")" asp-route-daysOfWeekToAdd="-1" asp-route-daysToShow="1" class="me-3 bi bi-arrow-left-circle timeline-arrow"></a>
            }
            <div class="timeline-week">
                @foreach (var day in ViewBag.DaysOfWeek)
                {
                    <div class="timeline-day">
                        @if (Enumerable.Count(ViewBag.ActivitiesByDay[day]) > 0)
                        {
                            <div class="day-cards">
                                @for (int i = 0; i < Enumerable.Count(ViewBag.ActivitiesByDay[day]); i++)
                                {                                    
                                    <div class="card text-white bg-primary border-4 border-success custom-card" style="max-width: 20rem; z-index: @(i);">
                                        <div class="card-header">@ViewBag.ActivitiesByDay[day][i].ActivityTitle.Title</div>
                                        <div class="card-body">
                                            @* <h4 class="card-title">@activity.Description</h4> *@
                                            <p>
                                                @ViewBag.ActivitiesByDay[day][i].StartedAt.ToString("HH:mm") -
                                                @ViewBag.ActivitiesByDay[day][i].StartedAt.Add(ViewBag.ActivitiesByDay[day][i].DurationPlanned).ToString("HH:mm")
                                            </p>
                                        </div>
                                    </div>
                                }              
                            </div>
                        }
                        else
                        {
                            <div class="card text-white bg-dark" style="max-width: 20rem;">
                                <div class="card-header">No activity</div>
                                <div class="card-body">
                                    <h4 class="card-title"></h4>
                                </div>
                            </div>
                        }

                        @if (Enumerable.Count(ViewBag.DaysOfWeek) > 1)
                        {
                            <div class="timeline-day-line"></div>
                        }   
                        else
                        {
                            <div class="timeline-day-one-line"></div>
                        }

                        <h6>@day.ToString("dddd")</h6>
                        <h6>@day.ToString("dd.MM")</h6>
                    </div>
                }
            </div>
            @if (Enumerable.Count(ViewBag.DaysOfWeek) > 1)
            {
                <a asp-controller="Timeline" asp-action="Index" asp-route-startOfWeek="@ViewBag.DaysOfWeek[0].ToString("yyyy-MM-dd")" asp-route-daysOfWeekToAdd="1" asp-route-daysToShow="7" class="ms-3 bi bi-arrow-right-circle timeline-arrow"></a>
            }
            else
            {
                <a asp-controller="Timeline" asp-action="Index" asp-route-startOfWeek="@ViewBag.DaysOfWeek[0].ToString("yyyy-MM-dd")" asp-route-daysOfWeekToAdd="1" asp-route-daysToShow="1" class="ms-3 bi bi-arrow-right-circle timeline-arrow"></a>
            }            
        </div>
    </div>
    <div class="container">
        <div class="timeline-dropdown-container">
            <div class="btn-group">
                <button class="btn btn-primary btn-lg dropdown-toggle" type="button" data-bs-toggle="dropdown">
                    Change display
                </button>
                <ul class="dropdown-menu w-100" style="text-align: center;">
                    <li><a asp-controller="Timeline" asp-action="Index" asp-route-startOfWeek="@ViewBag.DaysOfWeek[0].ToString("yyyy-MM-dd")" asp-route-daysToShow="7" class="dropdown-item">Week</a></li>
                    <li><a asp-controller="Timeline" asp-action="Index" asp-route-startOfWeek="@ViewBag.DaysOfWeek[0].ToString("yyyy-MM-dd")" asp-route-daysToShow="1" class="dropdown-item">Day</a></li>
                </ul>           
            </div>            
        </div>        
    </div>
</div>